{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{app}from\"./FirebaseConfig\";import{signOut,getAuth,onAuthStateChanged}from'firebase/auth';import{useNavigate}from'react-router-dom';import{getFirestore}from'firebase/firestore';import singer from\"../assets/instruments/singer.jpg\";import drums from\"../assets/instruments/drums.jpg\";import guitar from\"../assets/instruments/guitar.jpg\";import bass from\"../assets/instruments/bass.jpg\";import piano from\"../assets/instruments/piano.jpg\";import{getAllMusicians}from\"./musicians\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[allMusiciens,setAllMusiciens]=useState([]);const[userUid,setUserUid]=useState([]);const database=getAuth(app);const history=useNavigate();const handleClick=()=>{signOut(database).then(val=>{history('/');});};function invite(uid,e){e.preventDefault();console.log(\"invite \"+uid);subscribe();}const instruments={1:drums,2:guitar,3:bass,4:piano,5:singer};const niveaux={1:\"expert\",2:\"intermediaire\",3:\"débutant\"};async function subscribe(){let sw=await navigator.serviceWorker.ready;let push=await sw.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:'BE-C8n3HUtNZdDnjLHSSrGpJ8OFb5jG-nhaYGOjXWRra7WBTRiRcO6S-BN2IqRComcpaXKQKJ6Uw2zdknhweOM8'});}useEffect(()=>{onAuthStateChanged(database,async user=>{if(user){const username=user.displayName;console.log('Username de l\\'utilisateur connecté:',username);console.log('UserUid de l\\'utilisateur connecté:',user.uid);setUserUid(user.uid);}else{console.log('Utilisateur déconnecté');}});async function fetchData(){const data=await getAllMusicians();console.log(data);setAllMusiciens(data);}fetchData();},[]);const styleArray=[{backgroundColor:'#a1a1a1'},{backgroundColor:'#d0d0d0'},{backgroundColor:'#e8e8e8'}];return/*#__PURE__*/_jsxs(\"div\",{class:\"bg-gray-200/50\",children:[/*#__PURE__*/_jsxs(\"section\",{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"text-center pb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"text-base font-bold text-indigo-600\",children:\"Trouve tes futurs partenaire de soul\"}),/*#__PURE__*/_jsx(\"h1\",{class:\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\",children:\"Construis le groupe de tes r\\xEAves\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"flex flex-col space-y-8\",children:Array.isArray(allMusiciens)?allMusiciens.map(data=>data.id==userUid?null:/*#__PURE__*/_jsxs(\"div\",{class:\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\",style:styleArray[data.niveau-1],children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-6\",children:/*#__PURE__*/_jsx(\"img\",{class:\"object-center object-cover rounded-full h-48 w-48\",src:instruments[data.instrument],alt:\"photo\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-2xl text-gray-700 font-bold mb-2\",children:data.username}),/*#__PURE__*/_jsx(\"p\",{class:\"text-xl text-gray-500 mb-6\",children:niveaux[data.niveau]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:e=>invite(data.id,e),className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\",children:\"Inviter\"})})]})):null})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\",children:\"D\\xE9connexion\"})})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","app","signOut","getAuth","onAuthStateChanged","useNavigate","getFirestore","singer","drums","guitar","bass","piano","getAllMusicians","jsx","_jsx","jsxs","_jsxs","Home","allMusiciens","setAllMusiciens","userUid","setUserUid","database","history","handleClick","then","val","invite","uid","e","preventDefault","console","log","subscribe","instruments","niveaux","sw","navigator","serviceWorker","ready","push","pushManager","userVisibleOnly","applicationServerKey","user","username","displayName","fetchData","data","styleArray","backgroundColor","class","children","Array","isArray","map","id","style","niveau","src","instrument","alt","className","onClick"],"sources":["/Users/valoup/tek/tek4/Progressive_Web_Apps/meet-your-soul/src/registration/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { app } from \"./FirebaseConfig\";\nimport { signOut, getAuth, onAuthStateChanged } from 'firebase/auth'\nimport { useNavigate } from 'react-router-dom'\nimport { getFirestore } from 'firebase/firestore';\nimport singer from \"../assets/instruments/singer.jpg\"\nimport drums from \"../assets/instruments/drums.jpg\"\nimport guitar from \"../assets/instruments/guitar.jpg\"\nimport bass from \"../assets/instruments/bass.jpg\"\nimport piano from \"../assets/instruments/piano.jpg\"\nimport { getAllMusicians } from \"./musicians\";\n\nfunction Home(){\n    const [allMusiciens, setAllMusiciens] = useState([]);\n    const [userUid, setUserUid] = useState([]);\n\n    const database = getAuth(app);\n    const history = useNavigate()\n\n    const handleClick = () => {\n        signOut(database).then(val => {\n            history('/')\n        })\n    }\n\n    function invite(uid, e) {\n        e.preventDefault();\n        console.log(\"invite \" + uid)\n        subscribe()\n    }\n\n    const instruments = {\n        1: drums,\n        2: guitar,\n        3: bass,\n        4: piano,\n        5: singer,\n    };\n\n    const niveaux = {\n        1: \"expert\",\n        2: \"intermediaire\",\n        3: \"débutant\"\n    };\n\n    async function subscribe() {\n        let sw = await navigator.serviceWorker.ready;\n        let push = await sw.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: 'BE-C8n3HUtNZdDnjLHSSrGpJ8OFb5jG-nhaYGOjXWRra7WBTRiRcO6S-BN2IqRComcpaXKQKJ6Uw2zdknhweOM8'\n        })\n      }\n    \n\n    useEffect(() => {\n\n\n        \n        \n        onAuthStateChanged(database, async (user) => {\n            if (user) {\n                const username = user.displayName;\n                console.log('Username de l\\'utilisateur connecté:', username);\n                console.log('UserUid de l\\'utilisateur connecté:', user.uid);\n                setUserUid(user.uid);\n            } else {\n                console.log('Utilisateur déconnecté');\n            }\n        });\n        \n        async function fetchData() {\n            const data = await getAllMusicians();\n            console.log(data)\n            setAllMusiciens(data);\n        }\n        fetchData(); \n    }, []);\n\n    const styleArray = [\n        { backgroundColor: '#a1a1a1' },\n        { backgroundColor: '#d0d0d0' },\n        { backgroundColor: '#e8e8e8' },\n    ]\n\n    return (\n        <div class=\"bg-gray-200/50\">\n            <section class=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\">\n                <div class=\"text-center pb-12\">\n                    <h2 class=\"text-base font-bold text-indigo-600\">\n                        Trouve tes futurs partenaire de soul\n                    </h2>\n                    <h1 class=\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\">\n                        Construis le groupe de tes rêves\n                    </h1>\n                </div>\n                <div class=\"flex flex-col space-y-8\">\n\n                    {\n                        Array.isArray(allMusiciens) ?\n                            allMusiciens.map((data) => (\n                                data.id == userUid ?\n                                null :\n                                <div class=\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\" style={styleArray[data.niveau - 1]}>\n                                    <div class=\"mb-6\">\n                                        <img class=\"object-center object-cover rounded-full h-48 w-48\" src={instruments[data.instrument]} alt=\"photo\" />\n                                    </div>\n                                    <div class=\"text-center\">\n                                        <p class=\"text-2xl text-gray-700 font-bold mb-2\">{data.username}</p>\n                                        <p class=\"text-xl text-gray-500 mb-6\">{niveaux[data.niveau]}</p>\n                                    </div>\n                                    <div className=\"flex items-center justify-center\">\n                                        <button onClick={(e) => invite(data.id, e)} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\">\n                                            Inviter\n                                        </button>\n                                    </div>\n                                </div>\n                            ))\n                        : null\n\n                    }\n\n                </div>\n            </section>\n            <div className=\"flex items-center justify-center\">\n                <button onClick={handleClick} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\">\n                Déconnexion\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}