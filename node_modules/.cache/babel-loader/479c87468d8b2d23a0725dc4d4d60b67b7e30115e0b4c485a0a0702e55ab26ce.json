{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{app}from\"./FirebaseConfig\";import{signOut,getAuth,onAuthStateChanged}from'firebase/auth';import{useNavigate}from'react-router-dom';import{getFirestore}from'firebase/firestore';import singer from\"../assets/instruments/singer.jpg\";import drums from\"../assets/instruments/drums.jpg\";import guitar from\"../assets/instruments/guitar.jpg\";import bass from\"../assets/instruments/bass.jpg\";import piano from\"../assets/instruments/piano.jpg\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[allMusiciens,setAllMusiciens]=useState([]);const[userUid,setUserUid]=useState([]);const database=getAuth(app);const history=useNavigate();const handleClick=()=>{signOut(database).then(val=>{history('/');});};function invite(uid,e){e.preventDefault();console.log(\"invite \"+uid);}const instruments={1:drums,2:guitar,3:bass,4:piano,5:singer};const niveaux={1:\"expert\",2:\"intermediaire\",3:\"débutant\"};useEffect(()=>{const auth=getAuth();const db=getFirestore();const fetchData=async()=>{try{const response=await axios.get('http://localhost:3005/getUsers');setAllMusiciens(response.data);}catch(error){console.error('Erreur lors de la récupération des données des utilisateurs:',error);}};onAuthStateChanged(auth,async user=>{if(user){const username=user.displayName;console.log('Username de l\\'utilisateur connecté:',username);console.log('UserUid de l\\'utilisateur connecté:',user.uid);console.log(user.uid);setUserUid(user.uid);}else{console.log('Utilisateur déconnecté');}});if('serviceWorker'in navigator){navigator.serviceWorker.controller.postMessage({type:'CHECK_CACHE'});console.log(\"1\");}else{console.log(\"2\");fetchData();}navigator.serviceWorker.addEventListener('message',event=>{if(event.data&&event.data.type==='CACHE_EXISTS'){console.log(\"la réponse est déjà en cache, pas besoin de rappeler fetchData\");// La réponse est déjà en cache, pas besoin de rappeler fetchData\n}else{console.log(\"La réponse n'est pas en cache, appeler fetchData\");// La réponse n'est pas en cache, appeler fetchData\nfetchData();}});},[]);const styleArray=[{backgroundColor:'#a1a1a1'},{backgroundColor:'#d0d0d0'},{backgroundColor:'#e8e8e8'}];return/*#__PURE__*/_jsxs(\"div\",{class:\"bg-gray-200/50\",children:[/*#__PURE__*/_jsxs(\"section\",{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"text-center pb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"text-base font-bold text-indigo-600\",children:\"Trouve tes futurs partenaire de soul\"}),/*#__PURE__*/_jsx(\"h1\",{class:\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\",children:\"Construis le groupe de tes r\\xEAves\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"flex flex-col space-y-8\",children:allMusiciens.map(data=>data.id==userUid?null:/*#__PURE__*/_jsxs(\"div\",{class:\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\",style:styleArray[data.niveau-1],children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-6\",children:/*#__PURE__*/_jsx(\"img\",{class:\"object-center object-cover rounded-full h-48 w-48\",src:instruments[data.instrument],alt:\"photo\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-2xl text-gray-700 font-bold mb-2\",children:data.username}),/*#__PURE__*/_jsx(\"p\",{class:\"text-xl text-gray-500 mb-6\",children:niveaux[data.niveau]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:e=>invite(data.id,e),className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\",children:\"Inviter\"})})]}))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\",children:\"D\\xE9connexion\"})})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","app","signOut","getAuth","onAuthStateChanged","useNavigate","getFirestore","singer","drums","guitar","bass","piano","axios","jsx","_jsx","jsxs","_jsxs","Home","allMusiciens","setAllMusiciens","userUid","setUserUid","database","history","handleClick","then","val","invite","uid","e","preventDefault","console","log","instruments","niveaux","auth","db","fetchData","response","get","data","error","user","username","displayName","navigator","serviceWorker","controller","postMessage","type","addEventListener","event","styleArray","backgroundColor","class","children","map","id","style","niveau","src","instrument","alt","className","onClick"],"sources":["/Users/valoup/tek/tek4/Progressive_Web_Apps/meet-your-soul/src/registration/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { app } from \"./FirebaseConfig\";\nimport { signOut, getAuth, onAuthStateChanged } from 'firebase/auth'\nimport { useNavigate } from 'react-router-dom'\nimport { getFirestore } from 'firebase/firestore';\nimport singer from \"../assets/instruments/singer.jpg\"\nimport drums from \"../assets/instruments/drums.jpg\"\nimport guitar from \"../assets/instruments/guitar.jpg\"\nimport bass from \"../assets/instruments/bass.jpg\"\nimport piano from \"../assets/instruments/piano.jpg\"\nimport axios from \"axios\"\n\nfunction Home(){\n    const [allMusiciens, setAllMusiciens] = useState([]);\n    const [userUid, setUserUid] = useState([]);\n\n    const database = getAuth(app);\n    const history = useNavigate()\n\n    const handleClick = () => {\n        signOut(database).then(val => {\n            history('/')\n        })\n    }\n\n    function invite(uid, e) {\n        e.preventDefault();\n        console.log(\"invite \" + uid)\n    }\n\n    const instruments = {\n        1: drums,\n        2: guitar,\n        3: bass,\n        4: piano,\n        5: singer,\n    };\n\n    const niveaux = {\n        1: \"expert\",\n        2: \"intermediaire\",\n        3: \"débutant\"\n    };\n    \n\n    useEffect(() => {\n        const auth = getAuth();\n        const db = getFirestore()\n\n\n\n        const fetchData = async () => {\n            try {\n              const response = await axios.get('http://localhost:3005/getUsers');\n                setAllMusiciens(response.data);\n            } catch (error) {\n                console.error('Erreur lors de la récupération des données des utilisateurs:', error);\n            }\n          };\n\n        onAuthStateChanged(auth, async (user) => {\n            if (user) {\n                const username = user.displayName;\n                console.log('Username de l\\'utilisateur connecté:', username);\n                console.log('UserUid de l\\'utilisateur connecté:', user.uid);\n                console.log(user.uid);\n                setUserUid(user.uid);\n            } else {\n                console.log('Utilisateur déconnecté');\n            }\n        });\n\n        if ('serviceWorker' in navigator) {\n            navigator.serviceWorker.controller.postMessage({ type: 'CHECK_CACHE' });\n            console.log(\"1\")\n        } else {\n            console.log(\"2\")\n            fetchData();\n          }\n\n          navigator.serviceWorker.addEventListener('message', (event) => {\n            if (event.data && event.data.type === 'CACHE_EXISTS') {\n                console.log(\"la réponse est déjà en cache, pas besoin de rappeler fetchData\")\n              // La réponse est déjà en cache, pas besoin de rappeler fetchData\n            } else {\n                console.log(\"La réponse n'est pas en cache, appeler fetchData\")\n                // La réponse n'est pas en cache, appeler fetchData\n              fetchData();\n            }\n          });\n\n    }, []);\n\n    const styleArray = [\n        { backgroundColor: '#a1a1a1' },\n        { backgroundColor: '#d0d0d0' },\n        { backgroundColor: '#e8e8e8' },\n    ]\n\n    return (\n        <div class=\"bg-gray-200/50\">\n            <section class=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\">\n                <div class=\"text-center pb-12\">\n                    <h2 class=\"text-base font-bold text-indigo-600\">\n                        Trouve tes futurs partenaire de soul\n                    </h2>\n                    <h1 class=\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\">\n                        Construis le groupe de tes rêves\n                    </h1>\n                </div>\n                <div class=\"flex flex-col space-y-8\">\n\n                    {\n                        allMusiciens.map((data) => (\n                            data.id == userUid ?\n                            null :\n                            <div class=\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\" style={styleArray[data.niveau - 1]}>\n                                <div class=\"mb-6\">\n                                    <img class=\"object-center object-cover rounded-full h-48 w-48\" src={instruments[data.instrument]} alt=\"photo\" />\n                                </div>\n                                <div class=\"text-center\">\n                                    <p class=\"text-2xl text-gray-700 font-bold mb-2\">{data.username}</p>\n                                    <p class=\"text-xl text-gray-500 mb-6\">{niveaux[data.niveau]}</p>\n                                </div>\n                                <div className=\"flex items-center justify-center\">\n                                    <button onClick={(e) => invite(data.id, e)} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\">\n                                        Inviter\n                                    </button>\n                                </div>\n                            </div>\n                        ))\n                    }\n\n                </div>\n            </section>\n            <div className=\"flex items-center justify-center\">\n                <button onClick={handleClick} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\">\n                Déconnexion\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}