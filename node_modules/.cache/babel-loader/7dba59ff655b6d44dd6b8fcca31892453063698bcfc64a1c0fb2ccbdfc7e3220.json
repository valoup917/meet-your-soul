{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{app}from\"./FirebaseConfig\";import{signOut,getAuth,onAuthStateChanged}from'firebase/auth';import{useNavigate}from'react-router-dom';import{getFirestore,doc,getDoc,getDocs,collection}from'firebase/firestore';import singer from\"../assets/instruments/singer.jpg\";import drums from\"../assets/instruments/drums.jpg\";import guitar from\"../assets/instruments/guitar.jpg\";import bass from\"../assets/instruments/bass.jpg\";import piano from\"../assets/instruments/piano.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){const[allMusiciens,setAllMusiciens]=useState([]);const[userNameConnected,setUserNameConnected]=useState();const[userUidConnected,setUserUidConnected]=useState();const database=getAuth(app);const history=useNavigate();const handleClick=()=>{signOut(database).then(val=>{history('/');});};function invite(uid,e){e.preventDefault();console.log(\"invite \"+uid);}const instruments={1:drums,2:guitar,3:bass,4:piano,5:singer};const niveaux={1:\"expert\",2:\"intermediaire\",3:\"débutant\"};useEffect(()=>{const auth=getAuth();const db=getFirestore();onAuthStateChanged(auth,async user=>{if(user){const username=user.displayName;setUserNameConnected(username);setUserUidConnected(user.uid);console.log('Username de l\\'utilisateur connecté:',username);console.log('UserUid de l\\'utilisateur connecté:',user.uid);console.log(instruments[1]);try{const usersCollection=collection(db,'user');const usersSnapshot=await getDocs(usersCollection);const usersData=[];usersSnapshot.forEach(doc=>{if(doc.id!==user.uid)usersData.push({id:doc.id,...doc.data()});});setAllMusiciens(usersData);console.log(usersData);}catch(error){console.error('Erreur lors de la récupération des données des utilisateurs:',error.message);}}else{console.log('Utilisateur déconnecté');}});},[]);const styleArray=[{backgroundColor:'#a1a1a1'},{backgroundColor:'#d0d0d0'},{backgroundColor:'#e8e8e8'}];return/*#__PURE__*/_jsxs(\"div\",{class:\"bg-gray-200/50\",children:[/*#__PURE__*/_jsxs(\"section\",{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"text-center pb-12\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"text-base font-bold text-indigo-600\",children:\"Trouve tes futurs partenaire de soul\"}),/*#__PURE__*/_jsx(\"h1\",{class:\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\",children:\"Construis le groupe de tes r\\xEAves\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"flex flex-col space-y-8\",children:allMusiciens.map(data=>/*#__PURE__*/_jsxs(\"div\",{class:\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\",style:styleArray[data.niveau-1],children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-6\",children:/*#__PURE__*/_jsx(\"img\",{class:\"object-center object-cover rounded-full h-48 w-48\",src:instruments[data.instrument],alt:\"photo\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"text-2xl text-gray-700 font-bold mb-2\",children:data.username}),/*#__PURE__*/_jsx(\"p\",{class:\"text-xl text-gray-500 mb-6\",children:niveaux[data.niveau]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:e=>invite(data.id,e),className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\",children:\"Inviter\"})})]}))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\",children:\"D\\xE9connexion\"})})]});}export default Home;","map":{"version":3,"names":["React","useState","useEffect","app","signOut","getAuth","onAuthStateChanged","useNavigate","getFirestore","doc","getDoc","getDocs","collection","singer","drums","guitar","bass","piano","jsx","_jsx","jsxs","_jsxs","Home","allMusiciens","setAllMusiciens","userNameConnected","setUserNameConnected","userUidConnected","setUserUidConnected","database","history","handleClick","then","val","invite","uid","e","preventDefault","console","log","instruments","niveaux","auth","db","user","username","displayName","usersCollection","usersSnapshot","usersData","forEach","id","push","data","error","message","styleArray","backgroundColor","class","children","map","style","niveau","src","instrument","alt","className","onClick"],"sources":["/Users/valoup/tek/tek4/Progressive_Web_Apps/meet-your-soul/src/registration/Home.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { app } from \"./FirebaseConfig\";\nimport { signOut, getAuth, onAuthStateChanged } from 'firebase/auth'\nimport { useNavigate } from 'react-router-dom'\nimport { getFirestore, doc, getDoc, getDocs, collection } from 'firebase/firestore';\nimport singer from \"../assets/instruments/singer.jpg\"\nimport drums from \"../assets/instruments/drums.jpg\"\nimport guitar from \"../assets/instruments/guitar.jpg\"\nimport bass from \"../assets/instruments/bass.jpg\"\nimport piano from \"../assets/instruments/piano.jpg\"\n\nfunction Home(){\n    const [allMusiciens, setAllMusiciens] = useState([]);\n    const [userNameConnected, setUserNameConnected] = useState();\n    const [userUidConnected, setUserUidConnected] = useState();\n\n    const database = getAuth(app);\n    const history = useNavigate()\n\n    const handleClick = () => {\n        signOut(database).then(val => {\n            history('/')\n        })\n    }\n\n    function invite(uid, e) {\n        e.preventDefault();\n        console.log(\"invite \" + uid)\n    }\n\n    const instruments = {\n        1: drums,\n        2: guitar,\n        3: bass,\n        4: piano,\n        5: singer,\n    };\n\n    const niveaux = {\n        1: \"expert\",\n        2: \"intermediaire\",\n        3: \"débutant\"\n    };\n    \n\n    useEffect(() => {\n        const auth = getAuth();\n        const db = getFirestore()\n\n        onAuthStateChanged(auth, async (user) => {\n            if (user) {\n                const username = user.displayName;\n                setUserNameConnected(username);\n                setUserUidConnected(user.uid);\n                console.log('Username de l\\'utilisateur connecté:', username);\n                console.log('UserUid de l\\'utilisateur connecté:', user.uid);\n\n                console.log(instruments[1]);\n                try {\n                    const usersCollection = collection(db, 'user');\n                    const usersSnapshot = await getDocs(usersCollection);\n                    const usersData = [];\n                    usersSnapshot.forEach((doc) => {\n                        if (doc.id !== user.uid)\n                            usersData.push({ id: doc.id, ...doc.data() });\n                    });\n                    setAllMusiciens(usersData);\n                    console.log(usersData);\n                } catch (error) {\n                    console.error('Erreur lors de la récupération des données des utilisateurs:', error.message);\n                }\n\n            } else {\n                console.log('Utilisateur déconnecté');\n            }\n        });\n    }, []);\n\n    const styleArray = [\n        { backgroundColor: '#a1a1a1' },\n        { backgroundColor: '#d0d0d0' },\n        { backgroundColor: '#e8e8e8' },\n    ]\n\n    return (\n        <div class=\"bg-gray-200/50\">\n            <section class=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-4 py-12\">\n                <div class=\"text-center pb-12\">\n                    <h2 class=\"text-base font-bold text-indigo-600\">\n                        Trouve tes futurs partenaire de soul\n                    </h2>\n                    <h1 class=\"font-bold text-3xl md:text-4xl lg:text-5xl font-heading text-gray-900\">\n                        Construis le groupe de tes rêves\n                    </h1>\n                </div>\n                <div class=\"flex flex-col space-y-8\">\n\n                    {\n                        allMusiciens.map((data) => (\n                            <div class=\"w-full bg-white rounded-lg p-10 flex flex-col justify-center items-center\" style={styleArray[data.niveau - 1]}>\n                                <div class=\"mb-6\">\n                                    <img class=\"object-center object-cover rounded-full h-48 w-48\" src={instruments[data.instrument]} alt=\"photo\" />\n                                </div>\n                                <div class=\"text-center\">\n                                    <p class=\"text-2xl text-gray-700 font-bold mb-2\">{data.username}</p>\n                                    <p class=\"text-xl text-gray-500 mb-6\">{niveaux[data.niveau]}</p>\n                                </div>\n                                <div className=\"flex items-center justify-center\">\n                                    <button onClick={(e) => invite(data.id, e)} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-16 rounded ease-in-out duration-300\">\n                                        Inviter\n                                    </button>\n                                </div>\n                            </div>\n                        ))\n                    }\n\n                </div>\n            </section>\n            <div className=\"flex items-center justify-center\">\n                <button onClick={handleClick} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded mb-8\">\n                Déconnexion\n                </button>\n            </div>\n        </div>\n    )\n}\n\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}