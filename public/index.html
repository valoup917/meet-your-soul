<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="rencontre des musiciens" />
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"
      integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOM0s73eZmrhBAeYngPCF35UsXK5twZJDHV+8Y5" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
    <link rel="manifest" href="/manifest.json" />
   
    <title>Meet Your Soul</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
   
    <script>
      if('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/serviceWorker.js').then((reg) => {
            console.log('Worker Registered')
            console.log("------------------------------------------")
            reg.onupdatefound = () => {
              console.log("onupdatefound")
              const installingWorker = reg.installing;
              installingWorker.onstatechange = () => {
                console.log("onstatechange")
                console.log(installingWorker.state)
                if (installingWorker.state === 'installed') {
                  if (navigator.serviceWorker.controller) {
                    // New update available
                    console.log("New update available")
                    try {
                      navigator.serviceWorker.controller.postMessage({ message: 'newVersionAvailable' });
                    }
                    catch (e) {
                      console.log(e)
                    }
                  } else {
                    console.log('Content is cached for offline use.');
                  }
                }
              };
            };
          }).catch((err) => {
            console.log('Error in service worker registration.')
            console.log(err)
          })
        })
      }
    </script>
  </body>
</html>
